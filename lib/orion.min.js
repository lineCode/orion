!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("axios")):"function"==typeof define&&define.amd?define(["axios"],t):(e=e||self).orion=t(e.axios)}(this,function(d){"use strict";d=d&&d.hasOwnProperty("default")?d.default:d;var i=Object.assign({login:{method:"POST",path:"sign_in"},logout:{method:"POST",path:"sign_out"},getAllDevicesList:{method:"GET",path:"all_devices"},syncFeatures:{method:"POST",path:"services/sync_feature",options:{timeout:6e5}},getServiceStatus:{method:"GET",path:"services/status"},getDeviceProfilesList:{method:"GET",path:"device_profiles"},getDeviceProfilesInfo:{method:"GET",path:"device_profiles/:mac_address"},setDeviceProfilesInfo:{method:"PUT",path:"device_profiles/:mac_address"},getDeviceUpgradesList:{method:"GET",path:"device_upgrades"},createDeviceUpgrade:{method:"POST",path:"device_upgrades",options:{timeout:6e5}},getDeviceUpgradeInfo:{method:"GET",path:"device_upgrades/:upgrade_uuid"},resendDeviceUpgrade:{method:"POST",path:"device_upgrades/:upgrade_uuid/send"}},{setUserGateAuth:{method:"PUT",path:"user/gate_auth"},refreshSecret:{method:"POST",path:"user/refresh_token"},getAccountInfo:{method:"GET",path:"users/:user_uuid"},getAccountsList:{method:"GET",path:"users"},createAccount:{method:"POST",path:"users"},setAccountInfo:{method:"PUT",path:"users/:user_uuid"},removeAccount:{method:"DELETE",path:"users/:user_uuid"}},{getDevicesList:{method:"GET",path:"devices"},syncDevices:{method:"GET",path:"devices_sync"},bindDevice:{method:"POST",path:"devices"},syncDeviceToBank:{method:"POST",path:"devices/:device_uuid/sync_to_bank"},getDeviceInfo:{method:"GET",path:"devices/:device_uuid"},setDeviceInfo:{method:"PUT",path:"devices/:device_uuid"},setDeviceRecogMode:{method:"POST",path:"devices/:device_uuid/set_mode"},unbindDevice:{method:"DELETE",path:"devices/:device_uuid"},getPeoplesListFromDevice:{method:"GET",path:"devices/:device_uuid/offline_people"},addPeoplesToDevice:{method:"POST",path:"devices/:device_uuid/add_people"},removePeoplesFromDevice:{method:"POST",path:"devices/:device_uuid/remove_people"},removeAllPeoplesFromDevice:{method:"POST",path:"devices/:device_uuid/clear"},addAllPeoplesToDevice:{method:"POST",path:"devices/:device_uuid/add_all_people"},addDevicePeopleByGroups:{method:"POST",path:"devices/:device_uuid/add_groups"},resetDevicePeopleByGroups:{method:"POST",path:"devices/:device_uuid/replace_groups"},removeDevicePeopleByGroups:{method:"POST",path:"devices/:device_uuid/remove_groups"},addPersonToDevices:{method:"POST",path:"devices_sync_person/:person_uuid/add_to_devices"},removePersonFromDevices:{method:"POST",path:"devices_sync_person/:person_uuid/remove_from_devices"},resentPersonToDevices:{method:"POST",path:"devices_sync_person/:person_uuid/reset_to_devices"},getDevicesIdentifyRecord:{method:"GET",path:"device_logs/identify_list"},getDevicesStatusRecord:{method:"GET",path:"device_logs/status_list"},captureUploadImage:{method:"POST",path:"device_logs/:mac_address/capture_image"},syncDevicesPersonsImages:{method:"POST",path:"devices/:person_uuid"},recogMode:{method:"POST",path:"iots_switch_mode"},deviceRemoteCtrl:{method:"POST",path:"iots/:device_uuid/remote_ctrl"}},{getGroupInfo:{method:"GET",path:"groups/:group_uuid"},getGroupsList:{method:"GET",path:"groups"},createGroup:{method:"POST",path:"groups"},setGroupInfo:{method:"PUT",path:"groups/:group_uuid"},removeGroup:{method:"DELETE",path:"groups/:group_uuid"},getPeoplesListFromGroup:{method:"GET",path:"groups/:group_uuid/people"},addPeoplesToGroup:{method:"POST",path:"groups/:group_uuid/add_people"},addAllPeoplesToGroup:{method:"POST",path:"groups/:group_uuid/add_all_people"},removePeoplesFromGroup:{method:"POST",path:"groups/:group_uuid/remove_people"},removeAllPeoplesFromGroup:{method:"POST",path:"groups/:group_uuid/clear_people"},addPeoplesToGroupFromOtherGroups:{method:"POST",path:"groups/:group_uuid/add_group"}},{getPersonInfo:{method:"GET",path:"people/:person_uuid"},getPersonsList:{method:"GET",path:"people"},createPerson:{method:"POST",path:"people"},setPersonInfo:{method:"PUT",path:"people/:person_uuid"},removePerson:{method:"DELETE",path:"people/:person_uuid"},addPersonImage:{method:"POST",path:"people/:person_uuid/add_image",options:{timeout:6e4}},removePersonImage:{method:"POST",path:"people/:person_uuid/remove_image/:image_uuid"},removeAllPersonImage:{method:"POST",path:"people/:person_uuid/clear_image"}},{getFaceDetection:{method:"POST",path:"faces/detection",options:{timeout:6e4}},faceVerification:{method:"POST",path:"faces/verification",options:{timeout:6e4}},faceIdentification:{method:"POST",path:"faces/identification",options:{timeout:6e4}},faceImageIdentification:{method:"POST",path:"faces/image_identification",options:{timeout:6e4}},faceIdentifyLogs:{method:"GET",path:"online_identify_logs"},getFaceInfo:{method:"GET",path:"faces/:face_uuid"}});d.interceptors.response.use(function(e){var t=e.headers;try{e.data.total=t["x-total-count"]-0,e.data.page=t["x-current-page"]-0,e.data.per_page=t["x-per-page"]-0}catch(e){}return e},function(e){return Promise.reject(e)});var g=void 0,e=function(){function r(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,o){return t&&r(e.prototype,t),o&&r(e,o),e}}(),p=void 0,t=function(){function s(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);var t=Object.assign({},e),o=t.baseUrl,r=t.token,i=t.AppKey,a=t.appSecret;if(p=d||t._axios,o&&"string"!=typeof o)throw new Error("解析服务器地址失败，请检查您的服务器地址");o=o||"https://orion.readsense.cn",this.baseUrl=o.replace(/\/$/,""),this.TOKEN=r,this.AppKey=i,this.appSecret=a}return e(s,[{key:"setToken",value:function(e){if(e&&"string"!=typeof e)throw new Error("解析token失败");this.TOKEN=e}},{key:"setBaseUrl",value:function(e){if(e&&"string"!=typeof e)throw new Error("解析服务器地址失败，请检查您的服务器地址");e=e||"https://orion.readsense.cn",this.baseUrl=e.replace(/\/$/,"")}}]),s}(),o=function(r){Object.hasOwnProperty.call(i,r)&&Object.defineProperty(t.prototype,r,{value:function(e,t){var m,v,l,_,f,o=JSON.parse(JSON.stringify(i[r]));return m=o,v=e,l=t,_={axios:p,baseURL:this.baseUrl,TIMEOUT:this.TIMEOUT||1e4,TOKEN:this.TOKEN,AppKey:this.AppKey,appSecret:this.appSecret},f=_.axios,new Promise(function(o,e){var a=Object.assign({},v);for(var t in a)if(Object.hasOwnProperty.call(a,t)){var r=a[t];null!==r&&""!==r||delete a[t]}var i=m.path.match(/:[^/]+/g),s=l||{};i&&i.forEach(function(e){var t=e.replace(":",""),o=m.path;if(s[t])o=o.replace(e,s[t]),m.path=o;else{if(!a[t])throw new Error("参数 "+t+" 不能为空");o=o.replace(e,a[t]),m.path=o,delete a[t]}});var d={method:m.method,timeout:m.TIMEOUT,headers:{}};s&&(d.headers=Object.assign(d.headers,s.headers),delete s.headers);var p=Object.assign(d,s);/post|put/i.test(m.method)?function(){p["Content-Type"]="multipart/form-data";var o=void 0,e=void 0;if("undefined"==typeof window){var t=require("form-data");e=!0,o=new t}else o=new window.FormData;var r=function(t){if(Object.hasOwnProperty.call(a,t))if(/_uuids/.test(t)){var e=a[t];Array.isArray(e)?e.forEach(function(e){return o.append(t+"[]",e)}):o.append(t+"[]",e)}else o.append(t,a[t])};for(var i in a)r(i);o.append("request_channel","javascript_sdk"),p.data=o,e&&(d.headers=Object.assign(d.headers,o.getHeaders()))}():/get|delete/i.test(m.method)&&(a.request_channel="javascript_sdk",p.params=a);var u=_.baseURL;if(p.url=u+"/v1/api/"+m.path,"sign_in"===m.path)f(p).then(function(e){var t=e.data;/^ok$/i.test(t.status)&&(g=t.data.user.token),o(e)}).catch(e);else{var n=_.TOKEN||g,c=_.AppKey,h=_.AppSecret;if(n)p.headers.Authorization="Bearer "+n;else{if(!c)throw new Error("读取身份信息失败, 请先登录或配置您的appKey/appSecret");p.headers.AppKey=c,p.headers.AppSecret=h}f(p).then(o).catch(e)}})}})};for(var r in i)o(r);return t});
