!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("axios")):"function"==typeof define&&define.amd?define(["axios"],t):(e=e||self).orion=t(e.axios)}(this,function(f){"use strict";f=f&&f.hasOwnProperty("default")?f.default:f;var i=Object.assign({admin:{login:{method:"POST",path:"sign_in"},putUserAuth:{method:"PUT",path:"user/gate_auth"},refreshSecret:{method:"POST",path:"user/refresh_token"},syncFeatures:{method:"POST",path:"services/sync_feature"},getGrpcStatus:{method:"GET",path:"grpc/status"}},account:{getAccountInfo:{method:"GET",path:"users/:user_uuid"},getAccountsList:{method:"GET",path:"users"},createAccount:{method:"POST",path:"users"},putAccountInfo:{method:"PUT",path:"users/:user_uuid"},removeAccount:{method:"DELETE",path:"users/:user_uuid"}},device:{getDevicesList:{method:"GET",path:"devices"},syncDevices:{method:"GET",path:"devices_sync"},createDevice:{method:"POST",path:"devices"},syncDeviceToBank:{method:"POST",path:"devices/:device_uuid/sync_to_bank"},getDeviceInfo:{method:"GET",path:"devices/:device_uuid"},putDeviceInfo:{method:"PUT",path:"devices/:device_uuid"},setDeviceRecogMode:{method:"POST",path:"devices/:device_uuid/set_recog_mode"},getDeviceOnlineGroupsInfo:{method:"GET",path:"devices/:device_uuid/online_groups"},removeDevice:{method:"DELETE",path:"devices/:device_uuid"},createDevicePeoples:{method:"POST",path:"devices/:device_uuid/add_people"},removeDevicePeoples:{method:"POST",path:"devices/:device_uuid/remove_people"},removeAllDevicePeoples:{method:"POST",path:"devices/:device_uuid/clear"},createDeviceGroup:{method:"POST",path:"devices/:device_uuid/add_groups"},removeDeviceGroup:{method:"POST",path:"devices/:device_uuid/remove_groups"},removeAllDeviceGroup:{method:"POST",path:"devices/:device_uuid/clear_groups"},getDevicesIdentifyRecord:{method:"GET",path:"device_logs/identify_list"},getDevicesStatusRecord:{method:"GET",path:"device_logs/status_list"}},group:{getGroupInfo:{method:"GET",path:"groups/:group_uuid"},getGroupsList:{method:"GET",path:"groups"},createGroup:{method:"POST",path:"groups"},putGroupInfo:{method:"PUT",path:"groups/:group_uuid"},removeGroup:{method:"DELETE",path:"groups/:group_uuid"},addGroupsPeoples:{method:"POST",path:"groups/:group_uuid/add_people"},removeGroupsPeoples:{method:"POST",path:"groups/:group_uuid/remove_people"},removeAllGroupPeoples:{method:"POST",path:"groups/:group_uuid/clear_people"}},people:{getPeopleInfo:{method:"GET",path:"people/:person_uuid"},getPeoplesList:{method:"GET",path:"people"},createPeople:{method:"POST",path:"people"},putPeopleInfo:{method:"PUT",path:"people/:person_uuid"},removePeople:{method:"DELETE",path:"people/:person_uuid"},addPeopleImage:{method:"POST",path:"people/:person_uuid/add_image",options:{timeout:6e4}},removePeopleImage:{method:"POST",path:"people/:person_uuid/remove_image/:image_uuid"},removeAllPeopleImage:{method:"POST",path:"people/:person_uuid/clear_image"},syncPeopleDevicesImages:{method:"POST",path:"devices_sync_person/:person_uuid"}},face:{getFaceDetection:{method:"POST",path:"faces/detection",options:{timeout:6e4}},faceVerification:{method:"POST",path:"faces/verification",options:{timeout:6e4}},faceIdentification:{method:"POST",path:"faces/identification",options:{timeout:6e4}},faceImageIdentification:{method:"POST",path:"faces/image_identification",options:{timeout:6e4}},faceIdentifyLogs:{method:"GET",path:"online_identify_logs"},getFaceInfo:{method:"GET",path:"faces/:face_uuid"}}}),g=void 0;f.interceptors.response.use(function(e){var t=e.headers,o=t["x-total-count"];return o&&(e.data.total=o-0,e.data.page=t["x-current-page"]-0,e.data.per_page=t["x-per-page"]-0),e},function(e){return Promise.reject(e)});var p={init:function(e,t){if(console.info("baseURL",e),"string"!=typeof e)throw new Error("解析服务器地址失败，请检查您的服务器地址");p.baseURL=e.replace(/\/$/,""),p.TOKEN=t;var o=function(a){Object.hasOwnProperty.call(i,a)&&(p[a]=function(e,t){var h,m,v,l,o=JSON.parse(JSON.stringify(i[a]));return console.log(222,o,e),h=o,m=e,v=t,l={baseURL:p.baseURL,TIMEOUT:p.TIMEOUT||1e4,TOKEN:p.TOKEN},new Promise(function(o,e){var a=Object.assign({},m),t=h.path.match(/:[^/]+/g),i=v||{};t&&t.forEach(function(e){var t=e.replace(":",""),o=h.path;if(i[t])o=o.replace(e,i[t]),h.path=o;else{if(!a[t])throw new Error("参数 "+t+" 不能为空");o=o.replace(e,a[t]),h.path=o,delete a[t]}});var p={method:h.method,timeout:h.TIMEOUT,headers:{}};i&&(p.headers=Object.assign(p.headers,i.headers),delete i.headers);var r=Object.assign(p,i);if(/post|put/i.test(h.method)){r["Content-Type"]="multipart/form-data";var d=void 0,s=void 0;for(var u in d="undefined"==typeof window?(s=!0,new(require("form-data"))):new window.FormData,a)Object.hasOwnProperty.call(a,u)&&d.append(u,a[u]);r.data=d,s&&(p.headers=Object.assign(p.headers,d.getHeaders()))}else/get|delete/i.test(h.method)&&(r.params=a);var c=l.baseURL;if(r.url=c+"/v1/api/"+h.path,"api/sign_in"===h.path)f(r).then(function(e){var t=e.data;/^ok$/i.test(t.status)&&(g=t.data.user.token),o(e)}).catch(e);else{var n=l.TOKEN||g;if(!n)throw new Error("读取TOKEN信息失败，请先调用登录接口或设置您的TOKEN");r.headers.Authorization="Bearer "+n,f(r).then(o).catch(e)}})})};for(var a in i)o(a);return p.test=function(){console.log(p)},p}};return p});
